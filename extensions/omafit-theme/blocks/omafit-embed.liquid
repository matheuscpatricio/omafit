<div
  id="omafit-widget-root"
  data-shop-domain="{% if shop.domain contains '.myshopify.com' %}{{ shop.domain }}{% else %}{{ shop.domain }}.myshopify.com{% endif %}"
  {% if collection %}
    data-collection-handle="{{ collection.handle }}"
  {% elsif product and product.collections.size > 0 %}
    data-collection-handle="{{ product.collections.first.handle }}"
  {% endif %}
  {% if product and product.collections.size > 0 %}
    data-collection-handles="{{ product.collections | map: 'handle' | join: ',' }}"
  {% endif %}
  {% if product %}
    data-product-id="{{ product.id }}"
    data-product-handle="{{ product.handle }}"
  {% endif %}
  {% if block.settings.default_gender != blank %}
    data-default-gender="{{ block.settings.default_gender }}"
  {% endif %}
></div>

<script src="{{ 'omafit-widget.js' | asset_url }}"></script>


{% schema %}
{
  "name": "Omafit embed",
  "target": "body",
  "enabled_on": {
    "templates": ["product"]
  },
  "settings": [
    {
      "type": "select",
      "id": "default_gender",
      "label": "Gênero padrão (tabela de medidas)",
      "info": "Use quando o produto é majoritariamente para um gênero. O widget usará essa tabela até o cliente escolher. Evita buscar tabela unissex quando você criou só masculina ou feminina.",
      "options": [
        { "value": "", "label": "Não definir (app decide)" },
        { "value": "male", "label": "Masculino" },
        { "value": "female", "label": "Feminino" },
        { "value": "unisex", "label": "Unissex" }
      ],
      "default": ""
    }
  ]
}
{% endschema %}
